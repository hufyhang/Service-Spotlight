(function(){function Ribs(){this.Model=new _RibsModel;this.Collection=new _RibsCollection;this.View=new _RibsView;this.Router=new _Router}function _RibsView(){this._type="Ribs.View";this.self;this.json;this.el;this.events;this.renderFunc;this.template;this.initialize=function(){return};this.defaults={};this.onchange}function _RibsModel(){this._type="Ribs.Model";this.self;this.json;this.fetchUrl;this.fetchMethod="get";this.updateUrl;this.updateMethod="post";this.deleteUrl;this.deleteMethod="post";this.createUrl;this.createMethod="post";this.initialize=function(){return};this.defaults={};this.onchange}function _RibsCollection(){this._type="Ribs.Collection";this.self;this.json;this.model;this.models=[];this.fetchUrl;this.fetchMethod="get";this.updateUrl;this.updateMethod="post";this.deleteUrl;this.deleteMethod="post";this.createUrl;this.createMethod="post";this.defaults={};this.initialize=function(){return};this.onchange}function _Router(){}this.String.prototype.format=function(){"use strict";if(arguments.length===0){return null}var e=this;for(var t=0;t!==arguments.length;++t){var n=new RegExp("\\{"+(t+1)+"\\}","gm");e=e.replace(n,arguments[t])}return e};Ribs.prototype.extend=function(){"use strict";var e=function(e,t){for(var n in t){if(hasOwnProperty.call(t,n)){e[n]=t[n]}}return e};var t={};for(var n=0;n<arguments.length;n++){t=e(t,arguments[n])}return t};Ribs.prototype.make=function(e,t){var n;if(arguments.length===1){n=$.extend(true,{},e)}else if(arguments.length===2){n=$.extend(true,{},e);n.defaults=t}else{n=false}if(n!==false){n.initialize()}return n};Ribs.prototype.transferSettings=function(e){var t;alert("Type: "+e._type);if(e._type==="Ribs.View"){t=Ribs.View.make(e.json)}else if(e._type==="Ribs.Model"){t=Ribs.Model.make(e.json)}else if(e._type==="Ribs.Collection"){t=Ribs.Collection.make(e.json)}else{t=false}return t};_RibsView.prototype.make=function(e){var t=Object.create(this);t=t.adopt(e,t);this.self=t;return t};_RibsView.prototype.adopt=function(params,object){var obj;if(arguments.length===1){obj=this}else if(arguments.length===2){obj=object;obj.json=params}$.each(params,function(item){var val=params[item];if(item==="el"){obj.el=val}else if(item==="events"){obj.events=val}else if(item==="render"){obj.renderFunc=val}else if(item==="template"){obj.template=val}else if(item==="initialize"){obj.initialize=val}else if(item==="defaults"){if(typeof val==="function"){obj.defaults=val()}else{obj.defaults=val}}else if(item==="onchange"){obj.onchange=val}else{var code="_RibsView.prototype."+item+" = "+val;eval(code)}});return obj};_RibsView.prototype.changeEvent=function(defaultKey){if(this.onchange[defaultKey]){var code="_RibsView.prototype._doChangeEvent  = "+this.json[this.onchange[defaultKey]];eval(code);this._doChangeEvent()}};_RibsView.prototype.get=function(e){return this.defaults[e]};_RibsView.prototype.set=function(e){var t=this;$.each(e,function(n,r){t.defaults[n]=e[n];if(t.onchange){t.changeEvent(n)}});return this.defaults};_RibsView.prototype.render=function(){this.renderFunc();for(event in this.events){for(thing in this.events[event]){$(event).on(this.events[event][thing]["on"],{self:this},this.json[this.events[event][thing]["do"]])}}};_RibsModel.prototype.make=function(e){var t=Object.create(this);t=t.adopt(e,t);this.self=t;return t};_RibsModel.prototype.adopt=function(params,object){var obj;if(arguments.length===1){obj=this}else if(arguments.length===2){obj=object;obj.json=params}$.each(params,function(item){var val=params[item];if(item==="fetch"){obj.fetchUrl=val["url"];obj.fetchMethod=val["method"]?val["method"]:"get"}else if(item==="update"){obj.updateUrl=val["url"];obj.updateMethod=val["method"]?val["method"]:"post"}else if(item==="create"){obj.createUrl=val["url"];obj.createMethod=val["method"]?val["method"]:"put"}else if(item==="destory"){obj.deleteUrl=val["url"];obj.deleteMethod=val["method"]?val["method"]:"delete"}else if(item==="initialize"){obj.initialize=val}else if(item==="defaults"){if(typeof val==="function"){obj.defaults=val()}else{obj.defaults=val}}else if(item==="onchange"){obj.onchange=val}else{var code="_RibsModel.prototype."+item+" = "+val;eval(code)}});return obj};_RibsModel.prototype.get=function(e){return this.defaults[e]};_RibsModel.prototype.set=function(e){var t=this;$.each(e,function(n,r){t.defaults[n]=e[n];if(t.onchange){t.changeEvent(n)}});return this.defaults};_RibsModel.prototype.changeEvent=function(defaultKey){if(this.onchange[defaultKey]){var code="_RibsModel.prototype._doChangeEvent  = "+this.json[this.onchange[defaultKey]];eval(code);this._doChangeEvent()}};_RibsModel.prototype.fetch=function(e){this.ajax(this.fetchUrl,this.fetchMethod,e)};_RibsModel.prototype.update=function(e){this.ajax(this.updateUrl,this.updateMethod,e)};_RibsModel.prototype.destory=function(e){this.ajax(this.deleteUrl,this.deleteMethod,e)};_RibsModel.prototype.create=function(e){this.ajax(this.createUrl,this.createMethod,e)};_RibsModel.prototype.ajax=function(e,t,n){var r=n.data?n.data:{};var i=n.async?n.async:true;var s=n.done?n.done:function(){return};var o=n.fail?n.fail:function(){return};var u=n.always?n.always:function(){return};$.ajax({url:e,type:t,context:this,data:r,async:i}).done(s).fail(o).always(u)};_RibsCollection.prototype.make=function(e){var t=Object.create(this);t=t.adopt(e,t);this.self=t;return t};_RibsCollection.prototype.adopt=function(params,object){var obj;if(arguments.length===1){obj=this}else if(arguments.length===2){obj=object;obj.json=params}$.each(params,function(item){var val=params[item];if(item==="model"){obj.model=val}else if(item==="fetch"){obj.fetchUrl=val["url"];obj.fetchMethod=val["method"]?val["method"]:"get"}else if(item==="update"){obj.updateUrl=val["url"];obj.updateMethod=val["method"]?val["method"]:"post"}else if(item==="create"){obj.createUrl=val["url"];obj.createMethod=val["method"]?val["method"]:"put"}else if(item==="destory"){obj.deleteUrl=val["url"];obj.deleteMethod=val["method"]?val["method"]:"delete"}else if(item==="initialize"){obj.initialize=val}else if(item==="defaults"){if(typeof val==="function"){obj.defaults=val()}else{obj.defaults=val}}else if(item==="onchange"){obj.onchange=val}else{var code="_RibsCollection.prototype."+item+" = "+val;eval(code)}});return obj};_RibsCollection.prototype.get=function(e){return this.defaults[e]};_RibsCollection.prototype.set=function(e){var t=this;$.each(e,function(n,r){t.defaults[n]=e[n];if(t.onchange){t.changeEvent(n)}});return this.defaults};_RibsCollection.prototype.changeEvent=function(defaultKey){if(this.onchange[defaultKey]){var code="_RibsCollection.prototype._doChangeEvent  = "+this.json[this.onchange[defaultKey]];eval(code);this._doChangeEvent()}};_RibsCollection.prototype.fetch=function(e){var t={};var n=true;var r=function(){return};var i=function(){return};var s=function(){return};if(arguments.length!==0){t=e.data?e.data:{};n=e.async?e.async:true;r=e.done?e.done:function(){return};i=e.fail?e.fail:function(){return};s=e.always?e.always:function(){return}}var o=this;$.ajax({url:this.fetchUrl,type:this.fetchMethod,data:t,context:this,async:n,statusCode:{200:r},success:function(e){$.each(e,function(e,t){var n=Ribs.make(o.model,t);o.models.push(n)})},error:i,complete:s})};_RibsCollection.prototype.update=function(e){this.ajax(this.updateUrl,this.updateMethod,e)};_RibsCollection.prototype.destory=function(e){this.ajax(this.deleteUrl,this.deleteMethod,e)};_RibsCollection.prototype.create=function(e){this.ajax(this.createUrl,this.createMethod,e)};_RibsCollection.prototype.ajax=function(e,t,n){var r=n.data?n.data:{};var i=n.async?n.async:true;var s=n.done?n.done:function(){return};var o=n.fail?n.fail:function(){return};var u=n.always?n.always:function(){return};$.ajax({url:e,type:t,context:this,data:r,async:i}).done(s).fail(o).always(u)};_RibsCollection.prototype.size=function(){return this.models.length};_Router.prototype.route=function(e){this.route=routie(e);return this};_Router.prototype.navigate=function(e){routie(e)};var Ribs=new Ribs;window["Ribs"]={};window["Ribs"]["make"]=Ribs.make;window["Ribs"]["extend"]=Ribs.extend;window["Ribs"]["Model"]=Ribs.Model;window["Ribs"]["Collection"]=Ribs.Collection;window["Ribs"]["View"]=Ribs.View;window["Ribs"]["Router"]=Ribs.Router})()
